___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "displayName": "TikTok",
  "categories": [
    "ADVERTISING", "ANALYTICS", "MARKETING", "SOCIAL"
  ],
  "description": "TikTok is the leading destination for short-form mobile video, providing content that is exciting, spontaneous, and genuine.",
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,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\u003d",
    "displayName": "Custom template created by Luratic",
    "id": "brand_dummy"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "simpleValueType": true,
    "name": "id",
    "type": "TEXT",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "displayName": "Id:",
    "help": "Insert your \u003cstrong\u003esdkid\u003c/strong\u003e parameter here.",
    "valueHint": "BPEJITBHGJP7GQNGV1MO"
  },
  {
    "type": "LABEL",
    "name": "info",
    "displayName": "\u003ca href\u003d\"https://www.luratic.com/posts/templates/tags/tiktok\"\u003eMore info\u003c/a\u003e"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
//const log = require('logToConsole');

const encodeUriComponent = require('encodeUriComponent');
//log("data", data);
const id = encodeUriComponent(data.id);
const trackingUrl = 'https://analytics.tiktok.com/i18n/pixel/sdk.js?sdkid=' + id ;
injectScript(trackingUrl, data.gtmOnSuccess, data.gtmOnFailure);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://analytics.tiktok.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: gtmOnSuccess is invoked on injectScript success
  code: |-
    // test that gtmOnSuccess() is called when injectScript succeeds
    mock('injectScript', (url, onSuccess, onFailure) => {
      onSuccess();
    });

    // Call runCode to run the template's code.
    runCode();

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
- name: gtmOnFailure is invoked when injectScript fails
  code: |-
    // test gtmOnFailure() is called when injectScript fails
    mock('injectScript', (url, onSuccess, onFailure) => {
      onFailure();
    });

    // Call runCode to run the template's code.
    runCode();

    // Verify onFailure was called
    assertApi('gtmOnFailure').wasCalled();


___NOTES___

Developed with ❤ by: Alfonso, Txema and Brais.
Web: www.luratic.com
Linkedin: 
https://www.linkedin.com/in/braiscalvo/
https://www.linkedin.com/in/alfonsorc/
https://www.linkedin.com/in/txema-s%C3%A1nchez-a48482ba/


